# =============================================================================
# CryptoViz Configuration
# =============================================================================

# API Keys
# --------
# Clés API Binance (obligatoires pour la collecte de données)
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_SECRET_KEY=your_binance_secret_key_here

# Base de Données TimescaleDB
# ---------------------------
TIMESCALE_HOST=timescaledb
TIMESCALE_PORT=7432
TIMESCALE_DB=cryptoviz
TIMESCALE_USER=postgres
TIMESCALE_PASSWORD=your_secure_password_here

# Configuration Kafka
# -------------------
KAFKA_BROKERS=kafka:29092
KAFKA_TOPICS=crypto.raw.trades,crypto.aggregated.1m,crypto.aggregated.5m,crypto.aggregated.15m,crypto.aggregated.1h,crypto.aggregated.1d,crypto.news

# Services Ports
# --------------
BACKEND_PORT=8080
FRONTEND_PORT=3000

# Frontend Configuration
# ----------------------
# API Backend URL (for REST API calls)
VITE_API_URL=http://localhost:8080

# WebSocket Backend URL (for real-time data streaming)
VITE_WS_URL=ws://localhost:8080/ws/crypto

# Use mock data instead of real backend (false = use real backend-go)
VITE_USE_MOCK=false

# Configuration des Services
# --------------------------
# Mode Gin (debug, release, test)
GIN_MODE=release

# Intervalle de scraping des news (en secondes)
SCRAPING_INTERVAL=300

# Configuration des Indicateurs Techniques
# ----------------------------------------
# RSI (Relative Strength Index)
RSI_PERIOD=14

# MACD (Moving Average Convergence Divergence)
MACD_FAST=12
MACD_SLOW=26
MACD_SIGNAL=9

# Bollinger Bands
BOLLINGER_PERIOD=20
BOLLINGER_STD=2

# Momentum
MOMENTUM_PERIOD=10

# Configuration Redis (Cache)
# ---------------------------
REDIS_HOST=redis
REDIS_PORT=7379
REDIS_PASSWORD=

# Configuration de Logging
# ------------------------
LOG_LEVEL=info
LOG_FORMAT=json

# Configuration de Sécurité
# -------------------------
# JWT Secret pour l'authentification (si implémentée)
JWT_SECRET=your_jwt_secret_here

# CORS Origins autorisées
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# Configuration de Performance
# ----------------------------
# Nombre de workers pour le traitement des données
WORKER_COUNT=4

# Taille du buffer pour les messages Kafka
KAFKA_BUFFER_SIZE=1000

# Timeout pour les connexions WebSocket (en secondes)
WEBSOCKET_TIMEOUT=60

# Configuration de Monitoring
# ---------------------------
# Activer les métriques Prometheus
ENABLE_METRICS=true

# Port pour les métriques
METRICS_PORT=9090

# Configuration de Développement
# ------------------------------
# Mode debug pour les services Python
DEBUG=false

# Recharger automatiquement les services en développement
AUTO_RELOAD=false

# Configuration de Production
# ---------------------------
# Nombre de répliques pour chaque service (pour Kubernetes)
REPLICAS=1

# Limite de mémoire par service (en MB)
MEMORY_LIMIT=512

# Limite CPU par service
CPU_LIMIT=0.5

# Configuration de Rétention des Données
# --------------------------------------
# Rétention des données brutes (en heures)
RAW_DATA_RETENTION=24

# Hot/Cold Storage Tiering - Retention per Interval
# --------------------------------------------------
# Format: HOT_RETENTION_XX = days in hot storage (fast SSD)
#         COLD_RETENTION_XX = days in cold storage after hot (S3/MinIO)
#         Total retention = HOT + COLD

# 1m interval: Short-term analysis
HOT_RETENTION_1M=7
COLD_RETENTION_1M=30

# 5m interval: Medium-term patterns
HOT_RETENTION_5M=14
COLD_RETENTION_5M=90

# 15m interval: Swing trading
HOT_RETENTION_15M=30
COLD_RETENTION_15M=180

# 1h interval: Long-term analysis
HOT_RETENTION_1H=90
COLD_RETENTION_1H=730

# 1d interval: Historical records (stay hot forever, low volume)
HOT_RETENTION_1D=36500
COLD_RETENTION_1D=0

# Configuration de Backup
# -----------------------
# Activer les backups automatiques
ENABLE_BACKUP=true

# Intervalle de backup (en heures)
BACKUP_INTERVAL=24

# Répertoire de stockage des backups
BACKUP_PATH=/backups

# Configuration de Notification
# -----------------------------
# Webhook pour les alertes
ALERT_WEBHOOK_URL=

# Email pour les notifications critiques
ADMIN_EMAIL=admin@cryptoviz.com

# Configuration des Symboles Crypto
# ---------------------------------
# Liste des symboles à surveiller (séparés par des virgules)
CRYPTO_SYMBOLS=BTCUSDT,ETHUSDT,ADAUSDT,DOTUSDT,LINKUSDT,BNBUSDT,XRPUSDT,LTCUSDT,BCHUSDT,EOSUSDT

# Symbole par défaut pour l'interface
DEFAULT_SYMBOL=BTCUSDT

# Data Collector - Configuration de filtrage
# -------------------------------------------
# Collecter uniquement les paires avec ces devises de cotation (séparées par virgule)
# Laisser vide = toutes les devises
QUOTE_CURRENCIES=USDT,BUSD,FDUSD

# Volume minimum quotidien en devise de cotation (ex: 5000000 = 5M$)
# Plus c'est élevé, moins il y a de symboles
MIN_VOLUME=5000000

# Nombre maximum de symboles à collecter (triés par volume décroissant)
MAX_SYMBOLS=10

# Data Collector - Features activées
# -----------------------------------
# Collecter les trades (flux de transactions)
ENABLE_TRADES=true

# Collecter les tickers (bid/ask/volumes - double le nombre de WebSockets!)
ENABLE_TICKER=true

# Activer l'agrégation en temps réel (barres OHLCV)
ENABLE_AGGREGATION=true

# Historical Backfill - Collecte historique
# ------------------------------------------
# Activer le backfill automatique au premier démarrage
# Le collecteur vérifie si des données existent, sinon lance le backfill
ENABLE_BACKFILL=true

# Nombre de jours d'historique à récupérer (365 = 1 an)
# Pour tester rapidement: mettre 7 jours au lieu de 365
BACKFILL_LOOKBACK_DAYS=40

# Timeframes pour le backfill (séparés par virgule)
# Disponibles: 1m, 5m, 15m, 1h, 1d
# Pour tester rapidement: mettre seulement 1m,1h au lieu de tous
BACKFILL_TIMEFRAMES=1m,5m,15m,1h,1d

# Configuration des Intervalles
# -----------------------------
# Intervalles supportés pour l'agrégation
SUPPORTED_INTERVALS=1m,5m,15m,1h,1d

# Intervalle par défaut pour l'interface
DEFAULT_INTERVAL=1m

# Configuration de Rate Limiting
# ------------------------------
# Limite de requêtes par minute pour l'API
API_RATE_LIMIT=1000

# Limite de connexions WebSocket simultanées
WEBSOCKET_CONNECTION_LIMIT=100

# Configuration de Cache
# ----------------------
# TTL du cache Redis (en secondes)
CACHE_TTL=300

# Taille maximale du cache (en MB)
CACHE_MAX_SIZE=256

# Configuration de Compression
# ----------------------------
# Activer la compression des données TimescaleDB
ENABLE_COMPRESSION=true

# Délai avant compression (en jours)
COMPRESSION_DELAY=7

# Configuration de Health Checks
# ------------------------------
# Intervalle des health checks (en secondes)
HEALTH_CHECK_INTERVAL=30

# Timeout des health checks (en secondes)
HEALTH_CHECK_TIMEOUT=10

# Nombre de tentatives avant échec
HEALTH_CHECK_RETRIES=3

# Chart Progressive Loading Configuration
# ----------------------------------------
# Number of candles to load initially (buffer for smooth panning)
VITE_CHART_INITIAL_CANDLES=500

# Number of candles to show by default when chart loads
VITE_CHART_DEFAULT_ZOOM_CANDLES=48

# Auto-fetch trigger threshold (percentage from data edge, 0-100)
# Triggers data fetch when user pans within this % of loaded data boundary
VITE_CHART_AUTOFETCH_THRESHOLD=20

# Number of candles to fetch when auto-loading more data
VITE_CHART_FETCH_BATCH_SIZE=500
